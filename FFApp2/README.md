# ğŸ¤– AI ì•ˆì „ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ

ì‹¤ì‹œê°„ í—¬ë©§ ê°ì§€ ë° ROI(ìœ„í—˜ êµ¬ì—­) ì¶”ì  ì‹œìŠ¤í…œì„ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì œì–´í•˜ê³  ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” Flask ê¸°ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

## ğŸ“‹ í”„ë¡œì íŠ¸ ëª©ì 

ê³µì‚¬ì¥, ì‘ì—…ì‹¤ ë“± í—¬ë©§ ì°©ìš© / ìœ„í—˜ êµ¬ì—­ ì§„ì… ì œí•œì´ í•„ìš”í•œ ê³³ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ì‹¤ì‹œê°„ í—¬ë©§ ê°ì§€
- **YOLOv5 ê¸°ë°˜**: ë¯¸ë¦¬ í•™ìŠµëœ PT íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í—¬ë©§ ì°©ìš©/ë¯¸ì°©ìš© ì—¬ë¶€ ê°ì§€
- **DeepSORT ì¶”ì **: ì‚¬ëŒë³„ ê³ ìœ  ID í• ë‹¹ ë° ì¶”ì 
- **IoU ê¸°ë°˜ íŒë‹¨**: ë¨¸ë¦¬ ì˜ì—­ê³¼ í—¬ë©§ ì˜ì—­ì˜ ê²¹ì¹¨ ì •ë„ë¡œ ì •í™•í•œ íŒë‹¨

### 2. ìœ„í—˜ êµ¬ì—­(ROI) ì„¤ì • ë° ëª¨ë‹ˆí„°ë§
- **ì›¹ UIì—ì„œ ì§ì ‘ ì„¤ì •**: ë§ˆìš°ìŠ¤ í´ë¦­ìœ¼ë¡œ ROI ì˜ì—­ ê·¸ë¦¬ê¸°
- **ì‹¤ì‹œê°„ ìœ„í—˜ ê°ì§€**: í—¬ë©§ ë¯¸ì°©ìš©ìê°€ ìœ„í—˜ êµ¬ì—­ ì§„ì… ì‹œ ìë™ ê°ì§€
- **ì‹œê°ì  í‘œì‹œ**: ìœ„í—˜ êµ¬ì—­ì„ ë¹¨ê°„ìƒ‰ í´ë¦¬ê³¤ìœ¼ë¡œ í‘œì‹œ

### 3. ì›¹ ê¸°ë°˜ ì œì–´ ë° ëª¨ë‹ˆí„°ë§
- **ì‹¤ì‹œê°„ ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¼**: MJPEG í˜•ì‹ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì— ì „ì†¡
- **í†µê³„ ëŒ€ì‹œë³´ë“œ**: ì‹¤ì‹œê°„ ê°ì§€ í†µê³„ ë° ì‹œìŠ¤í…œ ìƒíƒœ í‘œì‹œ
- **ì´ë²¤íŠ¸ ê¸°ë¡**: ìœ„í—˜ ì´ë²¤íŠ¸ ìë™ ê¸°ë¡ ë° ì¡°íšŒ

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
- **MySQL ì—°ë™**: ìœ„í—˜ ì´ë²¤íŠ¸, ROI ì„¤ì •, ì‹œìŠ¤í…œ ë¡œê·¸ ì €ì¥
- **í†µê³„ ëˆ„ì **: í”„ë ˆì„ë³„ í†µê³„ ê¸°ë¡ ë° ëˆ„ì  ìœ„í—˜ ì´ë²¤íŠ¸ ì¹´ìš´íŒ…
- **ì´ë²¤íŠ¸ ê´€ë¦¬**: ìœ„í—˜ ì´ë²¤íŠ¸ í•´ê²° í‘œì‹œ ë° ì¡°íšŒ

## ğŸ› ï¸ ì‚¬ìš© ê¸°ìˆ 

- **YOLOv5**: ê°ì²´(ì‚¬ëŒ/í—¬ë©§/ë¯¸ì°©ìš©ì) ê°ì§€
- **DeepSORT**: ê°ì²´ ID ê¸°ë°˜ ì¶”ì 
- **OpenCV**: í”„ë ˆì„ ì²˜ë¦¬ ë° ì‹œê°í™”
- **Flask**: ì›¹ ì„œë²„ ë° RESTful API
- **MySQL**: ë°ì´í„° ì €ì¥ ë° ì„¸ì…˜ ê´€ë¦¬

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
FF/
â”œâ”€â”€ flask_app.py              # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ config.py                 # ì„¤ì • ê´€ë¦¬
â”œâ”€â”€ helmet_detector.py        # í—¬ë©§ ê°ì§€ ë° ì¶”ì 
â”œâ”€â”€ camera_manager.py         # ì¹´ë©”ë¼ ê´€ë¦¬
â”œâ”€â”€ database_manager.py       # ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
â”œâ”€â”€ api_routes.py            # Flask API ë¼ìš°íŠ¸
â”œâ”€â”€ requirements.txt         # Python ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª©ë¡
â”œâ”€â”€ install.bat              # Windows ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ install.sh               # Linux/Mac ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html           # ì›¹ ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ best.pt                  # YOLO ëª¨ë¸ íŒŒì¼ (ì‚¬ìš©ì ì œê³µ)
â””â”€â”€ README.md               # í”„ë¡œì íŠ¸ ì„¤ëª…ì„œ
```

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- **Python 3.8 ì´ìƒ**
- **MySQL 5.7 ì´ìƒ** (ì„ íƒì‚¬í•­, ì—†ìœ¼ë©´ ë°ì´í„°ë² ì´ìŠ¤ ê¸°ëŠ¥ ì œí•œ)
- **ì›¹ìº  ë˜ëŠ” IP ì¹´ë©”ë¼**
- **YOLO ëª¨ë¸ íŒŒì¼** (`best.pt`)

### 2. ìë™ ì„¤ì¹˜

#### Windows
```bash
# ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
install.bat
```

#### Linux/Mac
```bash
# ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x install.sh

# ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./install.sh
```

### 3. ìˆ˜ë™ ì„¤ì¹˜

```bash
# ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv

# ê°€ìƒí™˜ê²½ í™œì„±í™”
# Windows: venv\Scripts\activate
# Linux/Mac: source venv/bin/activate

# ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
pip install -r requirements.txt
```

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (ì„ íƒì‚¬í•­)

```sql
-- MySQLì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE ai_safety_monitor CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ì‚¬ìš©ì ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬
CREATE USER 'safety_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON ai_safety_monitor.* TO 'safety_user'@'localhost';
FLUSH PRIVILEGES;
```

### 5. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (ì„ íƒì‚¬í•­)

```bash
# Windows
set DB_HOST=localhost
set DB_PORT=3306
set DB_NAME=ai_safety_monitor
set DB_USER=safety_user
set DB_PASSWORD=your_password

# Linux/Mac
export DB_HOST=localhost
export DB_PORT=3306
export DB_NAME=ai_safety_monitor
export DB_USER=safety_user
export DB_PASSWORD=your_password
```

### 6. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

```bash
# ê°€ìƒí™˜ê²½ í™œì„±í™”
# Windows: venv\Scripts\activate
# Linux/Mac: source venv/bin/activate

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
python flask_app.py
```

### 7. ì›¹ ì ‘ì†

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:5000`ìœ¼ë¡œ ì ‘ì†

## ğŸ¯ ì‚¬ìš© ë°©ë²•

### 1. ì¹´ë©”ë¼ ì‹œì‘
- ì›¹ ì¸í„°í˜ì´ìŠ¤ì—ì„œ "ì¹´ë©”ë¼ ì‹œì‘" ë²„íŠ¼ í´ë¦­
- ì‹¤ì‹œê°„ ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¼ í™•ì¸

### 2. ROI ì„¤ì •
1. "ROI ê·¸ë¦¬ê¸° ì‹œì‘" ë²„íŠ¼ í´ë¦­
2. ë¹„ë””ì˜¤ í™”ë©´ì—ì„œ ì ë“¤ì„ í´ë¦­í•˜ì—¬ ìœ„í—˜ êµ¬ì—­ ì„¤ì •
3. ìµœì†Œ 3ê°œ ì´ìƒì˜ ì ì„ ì°ì€ í›„ "ROI ì„¤ì • ì™„ë£Œ" í´ë¦­
4. ROI ì´ë¦„ ì…ë ¥ í›„ ì €ì¥

### 3. ëª¨ë‹ˆí„°ë§
- ì‹¤ì‹œê°„ìœ¼ë¡œ í—¬ë©§ ì°©ìš© ì—¬ë¶€ ê°ì§€
- ìœ„í—˜ êµ¬ì—­ ì§„ì… ì‹œ ìë™ ì´ë²¤íŠ¸ ê¸°ë¡
- í†µê³„ ëŒ€ì‹œë³´ë“œì—ì„œ ì‹¤ì‹œê°„ ìƒíƒœ í™•ì¸

### 4. ì´ë²¤íŠ¸ ê´€ë¦¬
- "ìµœê·¼ ìœ„í—˜ ì´ë²¤íŠ¸" ì„¹ì…˜ì—ì„œ ì´ë²¤íŠ¸ ì¡°íšŒ
- ì´ë²¤íŠ¸ í•´ê²° í‘œì‹œ ë° ê´€ë¦¬

## ğŸ”§ ì„¤ì • ì˜µì…˜

### ê¸°ë³¸ ì„¤ì • (config.pyì—ì„œ ìˆ˜ì • ê°€ëŠ¥)

```python
DEFAULT_CONFIG = {
    'model_path': 'best.pt',        # YOLO ëª¨ë¸ íŒŒì¼ ê²½ë¡œ
    'conf_thresh': 0.2,             # ì‹ ë¢°ë„ ì„ê³„ê°’
    'iou_threshold': 0.1,           # IoU ì„ê³„ê°’
    'max_age': 30,                  # íŠ¸ë™ ìµœëŒ€ ìœ ì§€ ì‹œê°„
    'detection_interval': 5,        # ê°ì§€ ê°„ê²© (í”„ë ˆì„ ë‹¨ìœ„)
    'device': 'auto',               # ì‹¤í–‰ ë””ë°”ì´ìŠ¤ (auto/cuda/cpu)
    'source': 0                     # ì¹´ë©”ë¼ ì†ŒìŠ¤ (0=ê¸°ë³¸ ì¹´ë©”ë¼)
}
```

### ì›¹ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì„¤ì • ë³€ê²½
- ì„¤ì • ì¡°íšŒ ë²„íŠ¼ìœ¼ë¡œ í˜„ì¬ ì„¤ì • í™•ì¸
- APIë¥¼ í†µí•´ ì‹¤ì‹œê°„ ì„¤ì • ë³€ê²½ ê°€ëŠ¥

## ğŸ“Š API ì—”ë“œí¬ì¸íŠ¸

### ì‹œìŠ¤í…œ ì œì–´
- `GET /api/status` - ì‹œìŠ¤í…œ ìƒíƒœ ì¡°íšŒ
- `POST /api/camera/start` - ì¹´ë©”ë¼ ì‹œì‘
- `POST /api/camera/stop` - ì¹´ë©”ë¼ ì¤‘ì§€
- `POST /api/detector/reset` - ê°ì§€ê¸° ë¦¬ì…‹

### ROI ê´€ë¦¬
- `POST /api/roi/start` - ROI ê·¸ë¦¬ê¸° ì‹œì‘
- `POST /api/roi/add_point` - ROI ì  ì¶”ê°€
- `POST /api/roi/finish` - ROI ì„¤ì • ì™„ë£Œ
- `POST /api/roi/cancel` - ROI ê·¸ë¦¬ê¸° ì·¨ì†Œ
- `POST /api/roi/clear` - ROI ì´ˆê¸°í™”
- `GET /api/roi/load` - ì €ì¥ëœ ROI ë¡œë“œ

### ë°ì´í„° ì¡°íšŒ
- `GET /api/events/recent` - ìµœê·¼ ìœ„í—˜ ì´ë²¤íŠ¸ ì¡°íšŒ
- `GET /api/statistics/summary` - í†µê³„ ìš”ì•½ ì¡°íšŒ
- `POST /api/events/resolve` - ì´ë²¤íŠ¸ í•´ê²° í‘œì‹œ

### ì„¤ì • ê´€ë¦¬
- `GET /api/config/get` - ì„¤ì • ì¡°íšŒ
- `POST /api/config/update` - ì„¤ì • ì—…ë°ì´íŠ¸

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

1. **ì¹´ë©”ë¼ê°€ ì—´ë¦¬ì§€ ì•ŠëŠ” ê²½ìš°**
   - ì¹´ë©”ë¼ê°€ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸
   - `config.py`ì—ì„œ `source` ê°’ì„ ë³€ê²½ (1, 2, ...)

2. **ëª¨ë¸ ë¡œë“œ ì˜¤ë¥˜**
   - `best.pt` íŒŒì¼ì´ ì˜¬ë°”ë¥¸ ê²½ë¡œì— ìˆëŠ”ì§€ í™•ì¸
   - GPU ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ `device: 'cpu'`ë¡œ ì„¤ì •

3. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜**
   - MySQL ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
   - ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† ì •ë³´ í™•ì¸
   - ë°ì´í„°ë² ì´ìŠ¤ ì—†ì´ë„ ê¸°ë³¸ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥

4. **ì„±ëŠ¥ ë¬¸ì œ**
   - `detection_interval` ê°’ì„ ëŠ˜ë ¤ì„œ ì„±ëŠ¥ í–¥ìƒ
   - GPU ì‚¬ìš© ì‹œ CUDA ì„¤ì¹˜ í™•ì¸

### ë¡œê·¸ í™•ì¸

```bash
# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œ ì½˜ì†”ì—ì„œ ë¡œê·¸ í™•ì¸
python flask_app.py

# ë°ì´í„°ë² ì´ìŠ¤ ë¡œê·¸ í™•ì¸ (MySQL)
SELECT * FROM system_logs ORDER BY timestamp DESC LIMIT 10;
```

## ğŸ”„ ì—…ë°ì´íŠ¸ ë° ìœ ì§€ë³´ìˆ˜

### ì •ê¸°ì ì¸ ì—…ë°ì´íŠ¸
- ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—…ë°ì´íŠ¸: `pip install --upgrade -r requirements.txt`
- ëª¨ë¸ íŒŒì¼ ì—…ë°ì´íŠ¸: ìƒˆë¡œìš´ `best.pt` íŒŒì¼ë¡œ êµì²´

### ë°±ì—… ë° ë³µêµ¬
- ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…: `mysqldump ai_safety_monitor > backup.sql`
- ì„¤ì • ë°±ì—…: `config.py` íŒŒì¼ ë³µì‚¬

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”.

---

**ì£¼ì˜**: ì´ ì‹œìŠ¤í…œì€ ì•ˆì „ ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ ë³´ì¡° ë„êµ¬ì…ë‹ˆë‹¤. ì‹¤ì œ ì•ˆì „ ê´€ë¦¬ëŠ” ì „ë¬¸ ì¸ë ¥ê³¼ ì ì ˆí•œ ì•ˆì „ ì ˆì°¨ì— ë”°ë¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. 